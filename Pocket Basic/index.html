<!DOCTYPE html>
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template">
  <meta name="author" content="GeeksLabs">
  <meta name="keyword" content="Creative, Dashboard, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal">
  <!--<link rel="shortcut icon" href="img/favicon.png">-->

  <title>Pocket Basic - Ínicio</title>

  <!-- Bootstrap CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- bootstrap theme -->
  <link href="css/bootstrap-theme.css" rel="stylesheet">
  <!--external css-->
  <!-- font icon -->
  <link href="css/elegant-icons-style.css" rel="stylesheet">
  <link href="css/font-awesome.min.css" rel="stylesheet">

  <!--<link rel="stylesheet" href="css/owl.carousel.css" type="text/css">
  <link href="css/jquery-jvectormap-1.2.2.css" rel="stylesheet"> -->
  <!-- Custom styles -->
  <link href="css/style.css" rel="stylesheet">
  <link href="css/style-responsive.css" rel="stylesheet">
  <!--<link href="css/xcharts.min.css" rel=" stylesheet">
  <link href="css/jquery-ui-1.10.4.min.css" rel="stylesheet"> -->

  <!-- javascripts -->
  <script src="js/jquery.js"></script>
  <script src="js/jquery-1.8.3.min.js"></script>
  <!--<script src="js/jquery-ui-1.10.4.min.js"></script>
  <script type="text/javascript" src="js/jquery-ui-1.9.2.custom.min.js"></script>-->
  <!-- bootstrap -->
  <script src="js/bootstrap.min.js"></script>
  <!-- nice scroll -->
  <script src="js/jquery.scrollTo.min.js"></script>
  <script src="js/jquery.nicescroll.js" type="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <!--custome script for all page-->
    <script src="js/scripts.js"></script>
    <script src="refs/app.js"></script>

<body style="">
  <!-- container section start -->
  <section id="container" class="">

    <header class="header dark-bg">
      <div class="toggle-nav">
        <div class="icon-reorder tooltips" data-original-title="Alternar Menu" data-placement="bottom"><i class="icon_menu"></i></div>
      </div>

      <!--logo start-->
      <a href="index.html" class="logo">Pocket <span class="lite">Basic</span></a>
      <!--logo end-->

      <div class="nav search-row" id="top_menu">
        <!--  search form start -->

        <!--  search form end -->
      </div>

      <div class="top-nav notification-row">
        <!-- notificatoin dropdown start-->
        <ul class="nav pull-right top-menu">

          <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                            <span class="profile-ava">
                                <img alt="" src="img/avatar1_small.jpg">
                            </span>
                            <span class="username">Usuário</span>
                            <b class="caret"></b>
                        </a>
            <ul class="dropdown-menu extended logout">
              <div class="log-arrow-up"></div>
              <li class="eborder-top">
                <a href="index.html#"><i class="icon_profile"></i>MEU PERFIL</a>
              </li>

              <li>
                <a href="login.html"><i class="icon_key_alt"></i>Sair</a>
              </li>

            </ul>
          </li>
          <!-- user login dropdown end -->
        </ul>
        <!-- notificatoin dropdown end-->
      </div>
    </header>
    <!--header end-->

    <!--sidebar start-->
    <aside>
      <div id="sidebar" class="nav-collapse " style="overflow: hidden; outline: none; cursor: -webkit-grab; margin-left: 0px;" tabindex="5000">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu" style="display: block;">
          <li class="active">
            <a class="" href="index.html">
                          <i class="icon_house_alt"></i>
                          <span>Dashboard</span>
                      </a>
          </li>
          <li class="sub-menu">
            <a href="javascript:;" class="">
                          <i class="fa fa-money"></i>
                          <span>Receitas</span>
                          <span class="menu-arrow arrow_carrot-down arrow_carrot-right"></span>
                      </a>
            <ul class="sub" style="overflow: hidden; display: none;">
              <li><a class="" href="cadastro_receitas.html">Cadastrar</a></li>
              <li><a class="" href="consulta_receitas.html">Consultar | Editar</a></li>
            </ul>
          </li>
          <li class="sub-menu">
            <a href="javascript:;" class="">
                          <i class="fa fa-shopping-cart"></i>
                          <span>Despesas</span>
                          <span class="menu-arrow arrow_carrot-down arrow_carrot-right"></span>
                      </a>
            <ul class="sub" style="overflow: hidden; display: none;">
              <li><a class="" href="cadastro_despesas.html">Cadastrar</a></li>
              <li><a class="" href="consulta_despesas.html">Consultar | Editar</a></li>

            </ul>
          </li>
        </ul>
        <!-- sidebar menu end-->
      </div>
    </aside>
    <!--sidebar end-->

    <!--main content start-->
    <section id="main-content" style="margin-left: 180px;">
      <section class="wrapper">
        <!--overview start-->
        <div class="row">
          <div class="col-lg-12">
            <ol class="breadcrumb">
              <li><i class="fa fa-home"></i><a href="index.html">Ínicio</a></li>
              <li><i class="fa fa-laptop"></i>Dashboard</li>
            </ol>
          </div>
        </div>

        <div class="row">

          <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 ">
            <div class="info-box green-bg" >
              <i class="fa fa-money"></i>
              <div class="count"  id="total_receitas" type="number" step="any">R$ 0.00</div>
              <div class="title">Receitas</div>
            </div>
            <!--/.info-box-->
          </div>
          <!--/.col-->

          <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
            <div class="info-box red-bg">
              <i class="fa fa-shopping-cart"></i>
              <div class="count" id="total_despesas" type="number" step="any">R$ 0.00</div>
              <div class="title">Despesas</div>
            </div>
            <!--/.info-box-->
          </div>
          <!--/.col-->

          <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
            <div class="info-box yellow-bg">
              <i class="fa fa-exchange"></i>
              <div class="count" id="balanco" type="number" step="any">R$ 0.00</div>
              <div class="title">Balanço</div>
            </div>
            <!--/.info-box-->
          </div>
          <!--/.col-->
          <!--/.col-->

	<div class="form-group">
                    <label class="control-label col-lg-2" for="inputSuccess">Período:</label>
                    <div class="col-lg-3">
                      <select class="form-control m-bot15" id="filter" onchange="filterExpense()">
                                <option value="01">Janeiro</option>
                                <option value="02">Fevereiro</option>
                                <option value="03">Março</option>
                                <option value="04">Abril</option>
                                <option value="05">Maio</option>
		<option value="06">Junho</option>
		<option value="07">Julho</option>
		<option value="08">Agosto</option>
		<option value="09">Setembro</option>
		<option value="10">Outubro</option>
		<option value="11">Novembro</option>
		<option value="12">Dezembro</option>
                       </select>
                    </div>
                  </div>

        </div>
        <!--/.row-->

<div class="row">
  <div class="col-sm-6">
    <canvas id="myChart" width="300" height="157"></canvas>
<script>
var ctx = document.getElementById('myChart').getContext('2d');
  //EM TESTES
  //somando receitas
  let soma_al=0
  let soma_ed=0
  let soma_lz=0
  let soma_sa=0
  let soma_tr=0
  let soma_ot=0

  let data = []

  let lista  = db.getAllExpense() 
  lista.forEach(ls => {
    if(ls.filtro == "despesa"){
      if(ls.type == "1"){
        soma_al += parseFloat(ls.val)
      }
      if(ls.type == "2"){
        soma_ed += parseFloat(ls.val)
      }
          if(ls.type == "3"){
        soma_lz += parseFloat(ls.val)
      }
          if(ls.type == "4"){
        soma_sa += parseFloat(ls.val)
      }
          if(ls.type == "5"){
        soma_tr += parseFloat(ls.val)
      }
          if(ls.type == "6"){
        soma_ot += parseFloat(ls.val)
      }
    }  
  })
  data.push(soma_al)
  data.push(soma_ed)
  data.push(soma_lz)
  data.push(soma_sa)
  data.push(soma_tr)
  data.push(soma_ot)
  console.log(data)
//EM TESTE ATÉ AQUI /\

var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Alimentação', 'Educação', 'Lazer', 'Saúde', 'Transporte', 'Outros'],
        datasets: [{
            label: 'Valor de Despesas por Categoria',
            data: data, //<- data array onde armazena a soma de cada tipo de despesa
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
</script>

</div>

<div class="col-sm-6">
    <canvas id="chartjs-4" class="chartjs" width="undefined" height="undefined"></canvas>
    <script>
    // new Chart(document.getElementById("chartjs-4"),{
    //   "type":"doughnut",
    //   "data":{"labels":["Alimentação", "Educação", "Lazer", "Saúde", "Transporte", "Outros"],
    //   "datasets":[{"label":"","data":[300,50,100,70,40,20],
    //   "backgroundColor":["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"]}]}});

  //EM TESTES
  //somando receitas
  let soma_sl=0
  let soma_ad=0
  let soma_13=0
  let soma_ap=0
  let soma_ou=0

  let dataR = []

  let listaR  = db.getAllExpense() 
  listaR.forEach(ls => {
    if(ls.filtro == "receita"){
      if(ls.type == "1"){
        soma_sl += parseFloat(ls.val)
      }
      if(ls.type == "2"){
        soma_ad += parseFloat(ls.val)
      }
          if(ls.type == "3"){
        soma_13 += parseFloat(ls.val)
      }
          if(ls.type == "4"){
        soma_ap += parseFloat(ls.val)
      }
          if(ls.type == "5"){
        soma_ou += parseFloat(ls.val)
      }
    }  
  })
  dataR.push(soma_sl)
  dataR.push(soma_ad)
  dataR.push(soma_13)
  dataR.push(soma_ap)
  dataR.push(soma_ou)
  console.log(dataR)
//EM TESTE ATÉ AQUI /\

var myChart = new Chart(document.getElementById("chartjs-4"), {
    type: 'doughnut',
    data: {
        labels: ['Salário', 'Adiantamento', '13º Salário', 'Aplicações', 'Outros'],
        datasets: [{
            label: 'Valor de Despesas por Categoria',
            data: dataR, //<- data array onde armazena a soma de cada tipo de despesa
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
})
    </script>
</div>

</div>


</div>
</section>
</div>
</div>
   </section>

  </section>
    <!--main content end-->
  </section>
  <!-- container section start -->

</body>

</html>
